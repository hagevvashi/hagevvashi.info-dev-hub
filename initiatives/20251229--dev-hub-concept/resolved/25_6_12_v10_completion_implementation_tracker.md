# å®Ÿè£…ãƒˆãƒ©ãƒƒã‚«ãƒ¼: v10è¨­è¨ˆå®Œæˆï¼ˆs6-overlayçµ±åˆã®æœ€çµ‚1%ï¼‰

**ç›®çš„**: v10è¨­è¨ˆã®æ®‹ã‚Š1%ï¼ˆENTRYPOINTå¤‰æ›´ã¨docker-entrypoint.sh Phase 6å‰Šé™¤ï¼‰ã‚’å®Ÿè£…ã—ã€s6-overlayçµ±åˆã‚’å®Œæˆã•ã›ã‚‹

**åŸºæº–ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**:
- `initiatives/20251229--dev-hub-concept/25_6_12_v10_completion_strategy.md` - å®Ÿè£…æˆ¦ç•¥
- `initiatives/20251229--dev-hub-concept/25_0_process_management_solution.v10.md` - v10è¨­è¨ˆ
- `initiatives/20251229--dev-hub-concept/25_6_11_pid1_design_deviation_verification_tracker.md` - æ¤œè¨¼çµæœ

---

## å…¨ä½“é€²æ—

| ã‚»ã‚¯ã‚·ãƒ§ãƒ³ | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | å‚™è€ƒ |
| :--- | :--- | :--- |
| **Phase 1: ã‚³ãƒ¼ãƒ‰ä¿®æ­£** | âœ… **å®Œäº†** | 2026-01-10T01:00:00+09:00 - å…¨5ã‚¿ã‚¹ã‚¯å®Œäº† |
| **Phase 2: ãƒ“ãƒ«ãƒ‰ã¨æ¤œè¨¼** | âš ï¸ **ä¸€éƒ¨å®Œäº†ï¼ˆè§£æ±ºç­–ç¢ºå®šï¼‰** | 2-1ã€œ2-3å®Œäº†ã€2-3-1ã§å•é¡Œç™ºè¦‹ã€25_6_16ã§è§£æ±ºç­–ç¢ºå®š |
| **Phase 2-2: ãƒ©ãƒƒãƒ‘ãƒ¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè£…** | âš ï¸ **ä¸€éƒ¨å®Œäº†** | 2-2-1, 2-2-2å®Œäº†ã€2-2-3ã€œ2-2-5ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå®Ÿæ–½ |
| **Phase 2-2-2: ç’°å¢ƒå¤‰æ•°åŒ–** | âš ï¸ **å•é¡Œç™ºè¦‹** | supervisord/process-compose ç’°å¢ƒå¤‰æ•°åŒ–å®Œäº†ã€**2ã¤ã®é‡å¤§ãªãƒã‚°ç™ºè¦‹**ï¼ˆ2-2-2-5: s6-rcã‚µãƒ¼ãƒ“ã‚¹å®šç¾©æœªã‚³ãƒ”ãƒ¼ã€2-2-2-6: docker-entrypoint ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆå•é¡Œï¼‰ |
| **Phase 3: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°** | âœ… **å®Œäº†** | 25_6_14ã€œ25_6_19ã€ADR 005ã€v12æ§‹é€ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆæ¸ˆã¿ |
| **Phase 4: ã‚³ãƒŸãƒƒãƒˆ** | ğŸ”´ **æœªç€æ‰‹** | git commitå®Ÿæ–½ |

**è§£æ±ºç­–**: ãƒ©ãƒƒãƒ‘ãƒ¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆæˆ¦ç•¥ï¼ˆ25_6_16ï¼‰ã‚’æ¡ç”¨ - docker compose exec ã«è‡ªå‹•çš„ã« -u ${UNAME} ã‚’ä»˜ä¸

---

## ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆ

### Phase 1: ã‚³ãƒ¼ãƒ‰ä¿®æ­£

**ç›®çš„**: v10è¨­è¨ˆå®Œæˆ + 25_6_10 USERå•é¡Œã®åŒæ™‚è§£æ±º

**ä¿®æ­£å†…å®¹**:
1. Dockerfile ENTRYPOINTå¤‰æ›´ï¼ˆv10å®Œæˆï¼‰
2. Dockerfile USERä½ç½®å¤‰æ›´ï¼ˆ25_6_10+25_6_13å¯¾å¿œï¼‰
3. docker-entrypoint.sh Phase 6å‰Šé™¤ï¼ˆv10å®Œæˆï¼‰
4. s6-overlayã‚µãƒ¼ãƒ“ã‚¹å®šç¾©ä¿®æ­£ï¼ˆ25_6_13å¯¾å¿œï¼‰

**å‚ç…§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**:
- 25_6_12_v10_completion_strategy.mdï¼ˆv10å®Œæˆæˆ¦ç•¥ï¼‰
- 25_6_13_user_context_requirements.mdï¼ˆUSERå•é¡Œã®è¦ä»¶æ•´ç†ï¼‰

#### 1-1: Dockerfile ENTRYPOINTå¤‰æ›´

- [x] `.devcontainer/Dockerfile` line 300ã‚’ä¿®æ­£
    - **ä¿®æ­£å‰**: `ENTRYPOINT ["/usr/local/bin/docker-entrypoint.sh"]`
    - **ä¿®æ­£å¾Œ**: `ENTRYPOINT ["/init"]`
    - **å®Œäº†åŸºæº–**: line 300ãŒ`ENTRYPOINT ["/init"]`ã«ãªã£ã¦ã„ã‚‹
    - **å‚ç…§**: 25_6_12_v10_completion_strategy.md Phase 1 ã‚¿ã‚¹ã‚¯1-1
    - **å®Ÿæ–½æ—¥æ™‚**: 2026-01-10T00:45:00+09:00
    - **çµæœ**: âœ… **å®Œäº†** - ENTRYPOINTã‚’`/init`ã«å¤‰æ›´

#### 1-2: Dockerfileã‚³ãƒ¡ãƒ³ãƒˆä¿®æ­£

- [x] `.devcontainer/Dockerfile` line 301-305ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’ä¿®æ­£
    - **ä¿®æ­£å‰**:
        ```dockerfile
        # s6-overlay ã‚’ PID 1 ã¨ã—ã¦èµ·å‹•
        # s6-overlay ãŒ docker-entrypoint, supervisord, process-compose ã‚’ç®¡ç†
        ```
    - **ä¿®æ­£å¾Œ**:
        ```dockerfile
        # s6-overlay ã‚’ PID 1 ã¨ã—ã¦èµ·å‹•ï¼ˆ/initï¼‰
        # v10è¨­è¨ˆ: s6-overlay ãŒä»¥ä¸‹ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’ç®¡ç†
        #   - docker-entrypoint (oneshot): åˆæœŸåŒ–å‡¦ç†ï¼ˆPhase 1-5ï¼‰
        #   - supervisord (longrun): code-serverç­‰ã®ãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†
        #   - process-compose (longrun): TUIãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†
        ```
    - **å®Œäº†åŸºæº–**: ã‚³ãƒ¡ãƒ³ãƒˆãŒä¿®æ­£ã•ã‚Œã¦ã„ã‚‹
    - **å‚ç…§**: 25_6_12_v10_completion_strategy.md Phase 1 ã‚¿ã‚¹ã‚¯1-1
    - **å®Ÿæ–½æ—¥æ™‚**: 2026-01-10T00:46:00+09:00
    - **çµæœ**: âœ… **å®Œäº†** - v10è¨­è¨ˆã®è©³ç´°ã‚³ãƒ¡ãƒ³ãƒˆè¿½åŠ 

#### 1-3: docker-entrypoint.sh Phase 6å‰Šé™¤

- [x] `.devcontainer/docker-entrypoint.sh` line 225-229ã‚’ä¿®æ­£
    - **ä¿®æ­£å‰**:
        ```bash
        echo ""
        echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
        echo "âœ… Container initialization complete"
        echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
        echo ""
        echo "ğŸš€ Starting supervisord..."
        echo ""

        # supervisordã‚’ãƒ•ã‚©ã‚¢ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§èµ·å‹•ï¼ˆPID 1ã¨ã—ã¦å®Ÿè¡Œï¼‰
        exec sudo supervisord -c "${TARGET_CONF}" -n
        ```
    - **ä¿®æ­£å¾Œ**:
        ```bash
        echo ""
        echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
        echo "âœ… Container initialization complete"
        echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
        echo ""
        echo "âœ… docker-entrypoint.sh finished."
        echo "   s6-overlay will now start supervisord and process-compose as longrun services."
        echo ""

        # Phase 6å‰Šé™¤: s6-overlayãŒsupervisordã¨process-composeã‚’èµ·å‹•ã™ã‚‹
        ```
    - **å®Œäº†åŸºæº–**: `exec sudo supervisord`ãŒå‰Šé™¤ã•ã‚Œã¦ã„ã‚‹
    - **å‚ç…§**: 25_6_12_v10_completion_strategy.md Phase 1 ã‚¿ã‚¹ã‚¯1-2
    - **å®Ÿæ–½æ—¥æ™‚**: 2026-01-10T00:47:00+09:00
    - **çµæœ**: âœ… **å®Œäº†** - Phase 6ï¼ˆsupervisordèµ·å‹•ï¼‰ã‚’å‰Šé™¤

#### 1-4: Dockerfile USERä½ç½®å¤‰æ›´ï¼ˆ25_6_10+25_6_13å¯¾å¿œï¼‰

- [x] `.devcontainer/Dockerfile` line 307-309ã®`USER ${UNAME}`ã‚’ENTRYPOINTã®å¾Œã«é…ç½®
    - **å•é¡Œ**: ç¾åœ¨`USER ${UNAME}`ãŒENTRYPOINTã®å‰ã«ã‚ã‚‹ãŸã‚ã€PID 1ãŒérootã§å®Ÿè¡Œã•ã‚Œã‚‹
    - **å½±éŸ¿**: docker-entrypoint.sh Phase 1-5ã®chownç­‰ãŒå¤±æ•—ã™ã‚‹å¯èƒ½æ€§
    - **ä¿®æ­£å‰ï¼ˆline 296-299ï¼‰**:
        ```dockerfile
        USER ${UNAME}

        # ... (ã‚³ãƒ¡ãƒ³ãƒˆ)

        ENTRYPOINT ["/init"]
        ```
    - **ä¿®æ­£å¾Œï¼ˆline 300-309ï¼‰**:
        ```dockerfile
        ENTRYPOINT ["/init"]
        # s6-overlay ã‚’ PID 1 ã¨ã—ã¦èµ·å‹•ï¼ˆ/initï¼‰
        # v10è¨­è¨ˆ: s6-overlay ãŒä»¥ä¸‹ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’ç®¡ç†
        #   - docker-entrypoint (oneshot): åˆæœŸåŒ–å‡¦ç†ï¼ˆPhase 1-5ï¼‰
        #   - supervisord (longrun): code-serverç­‰ã®ãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†
        #   - process-compose (longrun): TUIãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†

        # ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«åˆ‡ã‚Šæ›¿ãˆ
        USER ${UNAME}
        WORKDIR /home/${UNAME}
        ```
    - **å®Œäº†åŸºæº–**: `USER ${UNAME}`ãŒENTRYPOINTã®å¾Œã«é…ç½®ã•ã‚Œã¦ã„ã‚‹
    - **å‚ç…§**: 25_6_13_user_context_requirements.md Phase 1
    - **å®Ÿæ–½æ—¥æ™‚**: 2026-01-10T00:48:00+09:00
    - **çµæœ**: âœ… **å®Œäº†** - USER ã‚’ ENTRYPOINT ã®å¾Œã«ç§»å‹•ï¼ˆdevcontainer + docker compose ä¸¡å¯¾å¿œï¼‰
    - **é‡è¦**: line 227-228 ã«ã‚‚ `USER ${UNAME}` ã¨ `WORKDIR /home/${UNAME}` ãŒã‚ã‚‹ãŒã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ„å›³çš„ãªè¨­å®šã®ãŸã‚ç¶­æŒ

#### 1-5: s6-overlayã‚µãƒ¼ãƒ“ã‚¹å®šç¾©ã®ä¿®æ­£ï¼ˆdocker-entrypointå®Ÿè¡Œãƒ¦ãƒ¼ã‚¶ãƒ¼æŒ‡å®šï¼‰

- [x] `.devcontainer/s6-rc.d/docker-entrypoint/up` ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼æŒ‡å®šã‚’è¿½åŠ 
    - **ç›®çš„**: docker-entrypoint.shã‚’`${UNAME}`ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§å®Ÿè¡Œ
    - **ä¿®æ­£å‰**:
        ```bash
        #!/command/execlineb -P
        /usr/local/bin/docker-entrypoint.sh
        ```
    - **ä¿®æ­£å¾Œ**:
        ```bash
        #!/usr/bin/env bash
        # ${UNAME}ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§å®Ÿè¡Œ
        # docker-entrypoint.shå†…ã®~ã¯${UNAME}ã®ãƒ›ãƒ¼ãƒ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æŒ‡ã™
        exec s6-setuidgid "${UNAME}" /usr/local/bin/docker-entrypoint.sh
        ```
    - **å®Œäº†åŸºæº–**: `s6-setuidgid`ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼æŒ‡å®šã•ã‚Œã¦ã„ã‚‹
    - **å‚ç…§**: 25_6_13_user_context_requirements.md Phase 2
    - **å®Ÿæ–½æ—¥æ™‚**: 2026-01-10T00:50:00+09:00
    - **çµæœ**: âœ… **å®Œäº†** - bashã‚·ã‚§ãƒ«ã§`${UNAME}`å¤‰æ•°å±•é–‹å¯èƒ½ã«ã—ã€s6-setuidgidã§ãƒ¦ãƒ¼ã‚¶ãƒ¼æŒ‡å®š
    - **é‡è¦ãªå¤‰æ›´**: execlineb â†’ bashï¼ˆç’°å¢ƒå¤‰æ•°å±•é–‹ã®ãŸã‚ï¼‰ã€docker-compose.yml ã® `environment` ã§æ¸¡ã•ã‚Œã‚‹ `${UNAME}` ã‚’åˆ©ç”¨

---

### Phase 2: ãƒ“ãƒ«ãƒ‰ã¨æ¤œè¨¼

**ç›®çš„**: ä¿®æ­£å¾Œã®ã‚³ãƒ¼ãƒ‰ã‚’ãƒ“ãƒ«ãƒ‰ã—ã€v10è¨­è¨ˆé€šã‚Šã«å‹•ä½œã™ã‚‹ã“ã¨ã‚’æ¤œè¨¼ã™ã‚‹

#### 2-1: DevContainerãƒ“ãƒ«ãƒ‰

- [x] no-cacheã§ãƒ“ãƒ«ãƒ‰ã‚’å®Ÿè¡Œ
    - **ã‚³ãƒãƒ³ãƒ‰**:
        ```bash
        cd .devcontainer
        docker compose --progress plain -f docker-compose.yml -f docker-compose.dev-vm.yml build --no-cache
        ```
    - **å®Œäº†åŸºæº–**: ã‚¨ãƒ©ãƒ¼ãªããƒ“ãƒ«ãƒ‰å®Œäº†
    - **å‚ç…§**: 25_6_12_v10_completion_strategy.md Phase 2 ã‚¿ã‚¹ã‚¯2-1
    - **å®Ÿæ–½æ—¥æ™‚**: 2026-01-10T00:05:00+09:00
    - **çµæœ**: â­ï¸ **ã‚¹ã‚­ãƒƒãƒ—**ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒno-cacheãªã—ã§ãƒ“ãƒ«ãƒ‰ãƒ»èµ·å‹•æ¸ˆã¿ï¼‰

#### 2-2: ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•

- [x] ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•
    - **ã‚³ãƒãƒ³ãƒ‰**:
        ```bash
        cd .devcontainer
        docker compose -f docker-compose.yml -f docker-compose.dev-vm.yml down
        docker compose --project-name <MonolithicDevContainerãƒ¬ãƒã‚¸ãƒˆãƒªå>_devcontainer \
          -f docker-compose.yml -f docker-compose.dev-vm.yml up -d
        ```
    - **å®Œäº†åŸºæº–**: ã‚¨ãƒ©ãƒ¼ãªãèµ·å‹•
    - **å‚ç…§**: 25_6_12_v10_completion_strategy.md Phase 2 ã‚¿ã‚¹ã‚¯2-2
    - **å®Ÿæ–½æ—¥æ™‚**: 2026-01-10T00:05:00+09:00
    - **çµæœ**: âœ… **èµ·å‹•æˆåŠŸ** - s6-overlayã®ã‚µãƒ¼ãƒ“ã‚¹èµ·å‹•ãƒ­ã‚°ã‚’ç¢ºèª

#### 2-3: PID 1ç¢ºèª

- [x] PID 1ãŒs6-overlayã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª
    - **ã‚³ãƒãƒ³ãƒ‰**:
        ```bash
        docker exec devcontainer-dev-1 ps aux | head -n 10
        ```
    - **å®Œäº†åŸºæº–**: PID 1ãŒ`s6-svscan`ã§ã‚ã‚‹ã“ã¨
    - **å‚ç…§**: 25_6_12_v10_completion_strategy.md Phase 2 ã‚¿ã‚¹ã‚¯2-3
    - **å®Ÿæ–½æ—¥æ™‚**: 2026-01-10T01:32:00+09:00
    - **çµæœ**: âœ… **æˆåŠŸ**
        - PID 1ã¯`s6-svscan`ã¨ã—ã¦èµ·å‹•ã—ã¦ã„ã‚‹ âœ…
        - **USERãŒ`root`ã§å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹** âœ…
        - å®Ÿéš›ã®å‡ºåŠ›:
            ```
            USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
            root         1  0.0  0.0    428    96 ?        Ss   17:32   0:00 /package/admin/s6/command/s6-svscan -d4 -- /run/service
            ```
        - **Phase 1ã®ä¿®æ­£ï¼ˆUSER ${UNAME}ã‚’ENTRYPOINTã®å¾Œã«ç§»å‹•ï¼‰ãŒæˆåŠŸ**

#### 2-3-1: docker exec bashãƒ­ã‚°ã‚¤ãƒ³ç¢ºèªï¼ˆè¿½åŠ æ¤œè¨¼ï¼‰

- [x] docker exec bashã§ãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ç¢ºèª
    - **ã‚³ãƒãƒ³ãƒ‰**:
        ```bash
        docker exec -it devcontainer-dev-1 bash
        ```
    - **å®Œäº†åŸºæº–**: `${UNAME}`ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ãƒ­ã‚°ã‚¤ãƒ³ã§ãã‚‹ã“ã¨
    - **å®Ÿæ–½æ—¥æ™‚**: 2026-01-10T01:35:00+09:00
    - **çµæœ**: âŒ **å¤±æ•— - 25_6_13ã®ç†è«–ãŒå®Ÿè·µã§ç ´ç¶»**
        - rootãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³ã•ã‚ŒãŸ
        - ã‚¨ãƒ©ãƒ¼: `bash: /root/.atuin/bin/env: No such file or directory`
        - **é‡è¦ãªç™ºè¦‹**: `USER ${UNAME}` ã‚’ ENTRYPOINT ã®å¾Œã«é…ç½®ã—ã¦ã‚‚ã€docker exec ã«å½±éŸ¿ã—ãªã„
        - **åŸå› **: Dockerfile ã® `USER` æŒ‡å®šã¯ã€é…ç½®ä½ç½®ã«é–¢ã‚ã‚‰ãšã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã«è¨˜éŒ²ã•ã‚Œã€ã™ã¹ã¦ã®ãƒ—ãƒ­ã‚»ã‚¹ã«å½±éŸ¿ã™ã‚‹
        - **25_6_13 ã®ç†è«–çš„ä»®èª¬ãŒèª¤ã‚Šã§ã‚ã‚‹ã“ã¨ãŒåˆ¤æ˜**
    - **è§£æ±ºç­–ã®æ¤œè¨**: 25_6_14ã§4ã¤ã®é¸æŠè‚¢ã‚’åˆ†æ
    - **æœ€çµ‚æ±ºå®š**: 25_6_16ã®ãƒ©ãƒƒãƒ‘ãƒ¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆæˆ¦ç•¥ã‚’æ¡ç”¨ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¦æœ›ã«ã‚ˆã‚Š/root/.bashrcä¿®æ­£ã¯å´ä¸‹ï¼‰

#### 2-3-2: USER ${UNAME} ã‚¢ãƒ³ã‚³ãƒ¡ãƒ³ãƒˆæ™‚ã®æŒ™å‹•ç¢ºèªï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼æ¤œè¨¼æ¸ˆã¿ï¼‰

- [x] `USER ${UNAME}` ã‚’ã‚¢ãƒ³ã‚³ãƒ¡ãƒ³ãƒˆã—ãŸå ´åˆã® PID 1 ã®æŒ™å‹•ã‚’ç¢ºèª
    - **å®Ÿæ–½æ—¥æ™‚**: 2026-01-10T01:40:00+09:00ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚ˆã‚‹æ¤œè¨¼ï¼‰
    - **çµæœ**: âŒ **PID 1ãŒérootã§å®Ÿè¡Œã•ã‚Œã‚‹**
        - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®å ±å‘Š: "PID 1 ãŒéãƒ«ãƒ¼ãƒˆã«ãªã‚‹ã“ã¨ã¯ç¢ºèªæ¸ˆã¿ã§ã™"
        - **çµè«–**: `USER ${UNAME}` ã®é…ç½®ä½ç½®ï¼ˆENTRYPOINTã®å‰å¾Œï¼‰ã¯ç„¡é–¢ä¿‚
        - **Docker ã®å®Ÿéš›ã®ä»•æ§˜**: `USER` æŒ‡å®šã¯ã€æœ€çµ‚çš„ãªã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã® `User` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«è¨˜éŒ²ã•ã‚Œã€ã™ã¹ã¦ã®ãƒ—ãƒ­ã‚»ã‚¹ï¼ˆENTRYPOINTå«ã‚€ï¼‰ã«å½±éŸ¿

#### 2-3-3: ãƒ‡ãƒƒãƒ‰ãƒ­ãƒƒã‚¯çŠ¶æ…‹ã®ç¢ºèª

- [x] Phase 1-4 ã®ä¿®æ­£ã§ã¯ä¸¡ç«‹ä¸å¯èƒ½ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª
    - **å®Ÿæ–½æ—¥æ™‚**: 2026-01-10T01:45:00+09:00
    - **çµæœ**: âœ… **ãƒ‡ãƒƒãƒ‰ãƒ­ãƒƒã‚¯ç¢ºå®š**
        - **é¸æŠè‚¢A**: `USER ${UNAME}` ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆ â†’ PID 1=root âœ…, docker exec=root âŒ
        - **é¸æŠè‚¢B**: `USER ${UNAME}` ã‚¢ãƒ³ã‚³ãƒ¡ãƒ³ãƒˆ â†’ PID 1=éroot âŒ, docker exec=${UNAME} âœ…
        - **çµè«–**: Dockerfile ã® `USER` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã ã‘ã§ã¯ä¸¡è¦ä»¶ã‚’ä¸¡ç«‹ã§ããªã„
    - **å‚ç…§**: `25_6_14_user_directive_limitation_analysis.md` - è©³ç´°åˆ†æãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

---

### Phase 2-2: ãƒ©ãƒƒãƒ‘ãƒ¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè£…ï¼ˆ25_6_16æˆ¦ç•¥ï¼‰

**ç›®çš„**: docker compose exec ã«è‡ªå‹•çš„ã« -u ${UNAME} ã‚’ä»˜ä¸ã™ã‚‹ãƒ©ãƒƒãƒ‘ãƒ¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè£…

**å‚ç…§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: 25_6_16_wrapper_script_strategy.md

#### 2-2-1: bin/dc ã‚¹ã‚¯ãƒªãƒ—ãƒˆä½œæˆ

- [x] `bin/dc` ãƒ©ãƒƒãƒ‘ãƒ¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œæˆ
    - **æ³¨**: v12æ§‹é€ ï¼ˆ25_6_18ã€25_6_19ã«åŸºã¥ãï¼‰ã§ bin/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½¿ç”¨
    - **å®Ÿæ–½æ—¥æ™‚**: 2026-01-10T08:30:00+09:00
    - **çµæœ**: âœ… **å®Œäº†** - bin/dc ã‚¹ã‚¯ãƒªãƒ—ãƒˆä½œæˆå®Œäº†ï¼ˆ1705ãƒã‚¤ãƒˆï¼‰
    - **å®Ÿè£…å†…å®¹**:
        ```bash
        #!/usr/bin/env bash
        set -euo pipefail

        SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
        DEVCONTAINER_DIR="${SCRIPT_DIR}/../.devcontainer"
        DEFAULT_USER="${UNAME}"
        USER="${UNAME:-${DEFAULT_USER}}"

        cd "${DEVCONTAINER_DIR}"
        COMPOSE_CMD="docker compose -f docker-compose.yml -f docker-compose.dev-vm.yml"

        if [ "${1:-}" = "exec" ]; then
            shift
            if [[ "$*" =~ -u|--user ]]; then
                exec ${COMPOSE_CMD} exec "$@"
            else
                exec ${COMPOSE_CMD} exec -u "${USER}" "$@"
            fi
        else
            exec ${COMPOSE_CMD} "$@"
        fi
        ```
    - **å®Œäº†åŸºæº–**: âœ… bin/dc ãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œã¦ã„ã‚‹
    - **å‚ç…§**: 25_6_16 ã‚»ã‚¯ã‚·ãƒ§ãƒ³4.1

#### 2-2-2: å®Ÿè¡Œæ¨©é™ã®ä»˜ä¸

- [x] bin/dc ã«å®Ÿè¡Œæ¨©é™ã‚’ä»˜ä¸
    - **ã‚³ãƒãƒ³ãƒ‰**: `chmod +x bin/dc`
    - **å®Œäº†åŸºæº–**: âœ… `ls -l bin/dc` ã§å®Ÿè¡Œæ¨©é™ãŒç¢ºèªã§ãã‚‹ï¼ˆ-rwxr-xr-x@ï¼‰
    - **å‚ç…§**: 25_6_16 ã‚»ã‚¯ã‚·ãƒ§ãƒ³4.2
    - **å®Ÿæ–½æ—¥æ™‚**: 2026-01-10T08:31:00+09:00
    - **çµæœ**: âœ… **å®Œäº†** - å®Ÿè¡Œæ¨©é™ä»˜ä¸å®Œäº†

#### 2-2-2-1: .bashrc_custom ä¿®æ­£ï¼ˆroot ãƒ¦ãƒ¼ã‚¶ãƒ¼å¯¾å¿œï¼‰

- [x] `.devcontainer/shell/.bashrc_custom` ã« root ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ¤å®šã‚’è¿½åŠ 
    - **å•é¡Œ**: root ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã¨ Atuinã€tfenvã€asdf ã®åˆæœŸåŒ–ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿ
        - `bash: /root/.atuin/bin/env: No such file or directory`
    - **åŸå› 1**: `.bashrc_custom` ã¯ã™ã¹ã¦ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§å…±æœ‰ã•ã‚Œã¦ã„ã‚‹ãŒã€Atuinã€tfenvã€asdf ã¯ ${USER} ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã®ã¿ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
    - **ä¿®æ­£å†…å®¹1**: ãƒ¦ãƒ¼ã‚¶ãƒ¼å›ºæœ‰ãƒ„ãƒ¼ãƒ«ã®åˆæœŸåŒ–ã‚’ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆérootï¼‰ã®ã¿ã«é™å®šï¼ˆ[.devcontainer/shell/.bashrc_custom:17-27](.devcontainer/shell/.bashrc_custom#L17-L27)ï¼‰
        ```bash
        # ã‚¹ãƒ†ãƒƒãƒ—5: Atuinã®åˆæœŸåŒ–ï¼ˆä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿ï¼‰
        if [ "$(id -u)" -ne 0 ] && command -v atuin >/dev/null 2>&1; then
          eval "$(atuin init bash)"
        fi

        # tfenvã€asdfã‚‚åŒæ§˜ã«ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿
        if [ "$(id -u)" -ne 0 ]; then
          eval "$(tfenv init -)"
          . ~/.asdf/asdf.sh
          . ~/.asdf/completions/asdf.bash
        fi
        ```
    - **åŸå› 2**: root ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯æ—¢å­˜ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãŸã‚ `/etc/skel/` ã®å†…å®¹ãŒè‡ªå‹•ã‚³ãƒ”ãƒ¼ã•ã‚Œãªã„
    - **åŸå› 3ï¼ˆæ ¹æœ¬åŸå› ï¼‰**: Atuinã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ï¼ˆDockerfile line 128-133ï¼‰ã« `/root/.bashrc` ã«ç„¡æ¡ä»¶ã®AtuinåˆæœŸåŒ–è¡ŒãŒè¿½åŠ ã•ã‚ŒãŸ
        - `. "$HOME/.atuin/bin/env"`
        - `eval "$(atuin init bash)"`
        - ã“ã‚Œã‚‰ã®è¡Œã¯Dockerfileã§è¿½åŠ ã—ãŸè¨­å®šã‚ˆã‚Šã‚‚å‰ã«å®Ÿè¡Œã•ã‚Œã‚‹ãŸã‚ã€.bashrc_customã®æ¡ä»¶åˆ†å²ãŒåŠ¹ã‹ãªã„
    - **ä¿®æ­£å†…å®¹2**: Dockerfile ã§ root ãƒ¦ãƒ¼ã‚¶ãƒ¼ç”¨ã«ã‚·ã‚§ãƒ«è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ˜ç¤ºçš„ã«ã‚³ãƒ”ãƒ¼ã—ã€**`/root/.bashrc` ã‚’ã‚¯ãƒªãƒ¼ãƒ³ãªçŠ¶æ…‹ã§åˆæœŸåŒ–**ï¼ˆ[.devcontainer/Dockerfile:205-220](.devcontainer/Dockerfile#L205-L220)ï¼‰
        ```dockerfile
        # root ãƒ¦ãƒ¼ã‚¶ãƒ¼ç”¨ã«ã‚‚åŒæ§˜ã®è¨­å®šã‚’é©ç”¨
        # æ—¢å­˜ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆrootï¼‰ã«ã¯ /etc/skel/ ã®å†…å®¹ãŒè‡ªå‹•ã‚³ãƒ”ãƒ¼ã•ã‚Œãªã„ãŸã‚ã€æ˜ç¤ºçš„ã«ã‚³ãƒ”ãƒ¼
        # ã¾ãŸã€Atuinã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ã« /root/.bashrc ã«è¿½åŠ ã•ã‚ŒãŸè¡Œã‚’å‰Šé™¤ã™ã‚‹ãŸã‚ã€.bashrc ã‚’å®Œå…¨ã«ç½®ãæ›ãˆã‚‹
        RUN cp /etc/skel/.bashrc_custom /root/.bashrc_custom && \
            cp /etc/skel/paths.sh /root/paths.sh && \
            cp /etc/skel/env.sh /root/env.sh && \
            # /root/.bashrc ã‚’ Debian ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã® .bashrc ã§åˆæœŸåŒ–ï¼ˆAtuiné–¢é€£ã®è¡Œã‚’å‰Šé™¤ï¼‰
            cp /etc/skel/.bashrc /root/.bashrc && \
            # ã‚«ã‚¹ã‚¿ãƒ è¨­å®šã‚’èª­ã¿è¾¼ã‚€ã‚ˆã†ã«è¿½è¨˜
            echo '\n# Load custom dev container configurations' >> /root/.bashrc && \
            echo '# First, load environment variables' >> /root/.bashrc && \
            echo 'if [ -f ~/env.sh ]; then . ~/env.sh; fi' >> /root/.bashrc && \
            echo '# Second, set up paths' >> /root/.bashrc && \
            echo 'if [ -f ~/paths.sh ]; then . ~/paths.sh; fi' >> /root/.bashrc && \
            echo '\n# Then, load custom functions and aliases' >> /root/.bashrc && \
            echo 'if [ -f ~/.bashrc_custom ]; then . ~/.bashrc_custom; fi' >> /root/.bashrc
        ```
    - **å®Œäº†åŸºæº–**:
        - âœ… `.bashrc_custom` ãŒä¿®æ­£ã•ã‚Œã¦ã„ã‚‹
        - âœ… Dockerfile ã§ root ãƒ¦ãƒ¼ã‚¶ãƒ¼ç”¨è¨­å®šãŒè¿½åŠ ã•ã‚Œã¦ã„ã‚‹
        - âœ… `/root/.bashrc` ãŒã‚¯ãƒªãƒ¼ãƒ³ãªçŠ¶æ…‹ã§å†ç”Ÿæˆã•ã‚Œã‚‹ï¼ˆAtuinç„¡æ¡ä»¶åˆæœŸåŒ–è¡Œã‚’å‰Šé™¤ï¼‰
        - âœ… root ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ãƒ­ã‚°ã‚¤ãƒ³æ™‚ã«ã‚¨ãƒ©ãƒ¼ãŒå‡ºãªã„ï¼ˆãƒ“ãƒ«ãƒ‰å¾Œã«ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¤œè¨¼ï¼‰
    - **å‚ç…§**: ä¸€èˆ¬çš„ãªãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ï¼ˆDockerfile ã§ãƒ“ãƒ«ãƒ‰æ™‚ã« root ç”¨è¨­å®šã‚’ç¢ºå®šã—ã€ã‚¯ãƒªãƒ¼ãƒ³ãª .bashrc ã‚’ä½¿ç”¨ï¼‰
    - **å®Ÿæ–½æ—¥æ™‚**: 2026-01-10T09:00:00+09:00ï¼ˆ.bashrc_customï¼‰ã€2026-01-10T09:15:00+09:00ï¼ˆDockerfile åˆç‰ˆï¼‰ã€2026-01-10T09:30:00+09:00ï¼ˆDockerfile ä¿®æ­£ - /root/.bashrc ç½®ãæ›ãˆï¼‰ã€2026-01-10T09:45:00+09:00ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼æ¤œè¨¼å®Œäº†ï¼‰
    - **æ¤œè¨¼çµæœ**: âœ… root ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ã®ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸã€Atuin ã‚¨ãƒ©ãƒ¼å®Œå…¨è§£æ¶ˆ
        ```
        ./bin/dc exec -u root dev /bin/bash
        Loading environment variables...
        Setting paths...
        ï¼ˆã‚¨ãƒ©ãƒ¼ãªã—ï¼‰
        ```
    - **çµæœ**: âœ… **å®Œäº†** - .bashrc_custom ã« root åˆ¤å®šè¿½åŠ  + Dockerfile ã§ root ã® .bashrc ã‚’å®Œå…¨ã«ç½®ãæ›ãˆã¦ã‚¯ãƒªãƒ¼ãƒ³ãªçŠ¶æ…‹ã«

#### 2-2-2-2: supervisord è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼åå•é¡Œï¼ˆè¿½åŠ ã‚¿ã‚¹ã‚¯ï¼‰

- [ ] supervisord è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã® `<ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼>` ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰å•é¡Œã‚’è§£æ±º
    - **å•é¡Œ**: `.devcontainer/supervisord/seed.conf` ã¨ `supervisord.conf` ã« `<ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼>` ãŒãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚Œã¦ãŠã‚Šã€ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ä½¿ç”¨ã§ããªã„
    - **å½±éŸ¿ãƒ•ã‚¡ã‚¤ãƒ«**:
        - `.devcontainer/supervisord/seed.conf` (line 76, 81)
        - `.devcontainer/supervisord/supervisord.conf` (line 12, 14, 22, 24)
    - **å‚ç…§**: 25_6_20_supervisord_hardcoded_username_issue.md
    - **å®Ÿæ–½å†…å®¹**:
        1. âœ… supervisord ç’°å¢ƒå¤‰æ•°å±•é–‹ã‚µãƒãƒ¼ãƒˆã®èª¿æŸ»
        2. âœ… èª¿æŸ»çµæœã«åŸºã¥ãå®Ÿè£…æ–¹é‡æ±ºå®šï¼ˆç’°å¢ƒå¤‰æ•°åŒ–å¯èƒ½ï¼‰
        3. âœ… è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ä¿®æ­£
        4. âœ… ãƒ“ãƒ«ãƒ‰æˆåŠŸç¢ºèªï¼ˆ2026-01-10T11:25:00+09:00ï¼‰ - ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãªã—ãƒ“ãƒ«ãƒ‰ãŒæˆåŠŸ
        5. â³ ãƒ“ãƒ«ãƒ‰æ™‚æ¤œè¨¼ï¼ˆ`supervisord -t`ï¼‰- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå®Ÿæ–½ï¼ˆ**æ¤œè¨¼æ‰‹é †**: 25_6_21 ã‚»ã‚¯ã‚·ãƒ§ãƒ³3.1, 3.2ï¼‰
        6. â³ å®Ÿè¡Œæ™‚æ¤œè¨¼ï¼ˆcode-server èµ·å‹•ç¢ºèªï¼‰- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå®Ÿæ–½ï¼ˆ**æ¤œè¨¼æ‰‹é †**: 25_6_21 ã‚»ã‚¯ã‚·ãƒ§ãƒ³3.3, 3.4ï¼‰
    - **èª¿æŸ»çµæœï¼ˆ2026-01-10T10:30:00+09:00ï¼‰**:
        - âœ… **supervisord 3.2+ ã§å…¨ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒç’°å¢ƒå¤‰æ•°å±•é–‹ã‚’ã‚µãƒãƒ¼ãƒˆ**
        - âœ… `user` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰: ç’°å¢ƒå¤‰æ•°å±•é–‹å¯èƒ½ï¼ˆ`%(ENV_UNAME)s`ï¼‰
        - âœ… `environment` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰: ç’°å¢ƒå¤‰æ•°å±•é–‹å¯èƒ½ï¼ˆ`HOME="/home/%(ENV_UNAME)s"`ï¼‰
        - âœ… æ§‹æ–‡: `%(ENV_å¤‰æ•°å)s` - supervisord ã®ç’°å¢ƒå¤‰æ•°ã‹ã‚‰å±•é–‹
        - âš ï¸ **é‡è¦ãªåˆ¶ç´„**: supervisord èµ·å‹•æ™‚ã®ç’°å¢ƒå¤‰æ•°ã®ã¿å±•é–‹å¯èƒ½ï¼ˆã‚·ã‚§ãƒ«ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã®å¤‰æ•°ã¯ä¸å¯ï¼‰
        - âœ… docker-compose.yml ã§æ—¢ã« `UNAME` ç’°å¢ƒå¤‰æ•°ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ãŸã‚åˆ©ç”¨å¯èƒ½
        - å‚ç…§:
          - [Configuration File â€” Supervisor 4.3.0 documentation](https://supervisord.org/configuration.html)
          - [Supervisor/supervisor Issue #126](https://github.com/Supervisor/supervisor/issues/126)
          - [Supervisor/supervisor Issue #1380](https://github.com/Supervisor/supervisor/issues/1380)
    - **æ±ºå®šã—ãŸå®Ÿè£…æ–¹é‡**: âœ… **ç’°å¢ƒå¤‰æ•°åŒ–ï¼ˆ`%(ENV_UNAME)s`ï¼‰ã‚’æ¡ç”¨**
    - **ä¿®æ­£å†…å®¹ï¼ˆ2026-01-10T10:45:00+09:00ï¼‰**:
        - âœ… `.devcontainer/supervisord/seed.conf`:
            - Line 76: `user=<ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼>` â†’ `user=%(ENV_UNAME)s`
            - Line 81: `HOME="/home/<ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼>"` â†’ `HOME="/home/%(ENV_UNAME)s"`
        - âœ… `.devcontainer/supervisord/supervisord.conf`:
            - Line 12: `user=<ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼>` â†’ `user=%(ENV_UNAME)s`
            - Line 14: `HOME="/home/<ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼>"` â†’ `HOME="/home/%(ENV_UNAME)s"`
            - Line 22: `user=<ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼>` â†’ `user=%(ENV_UNAME)s`
            - Line 24: `HOME="/home/<ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼>"` â†’ `HOME="/home/%(ENV_UNAME)s"`
    - **å®Œäº†åŸºæº–**:
        - âœ… supervisord ç’°å¢ƒå¤‰æ•°å±•é–‹ã‚µãƒãƒ¼ãƒˆã‚’ç¢ºèª
        - âœ… `user` ãŠã‚ˆã³ `environment` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ `%(ENV_UNAME)s` ã§å‹•çš„è¨­å®š
        - âœ… ãƒ“ãƒ«ãƒ‰ãŒæˆåŠŸã™ã‚‹ï¼ˆ2026-01-10T11:25:00+09:00ç¢ºèªæ¸ˆã¿ï¼‰
        - â³ ãƒ“ãƒ«ãƒ‰æ™‚ã®æ§‹æ–‡ãƒã‚§ãƒƒã‚¯ãŒé€šã‚‹ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼æ¤œè¨¼å¾…ã¡ï¼‰
        - â³ å®Ÿè¡Œæ™‚ã«æ­£ã—ã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ code-server ãŒèµ·å‹•ã™ã‚‹ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼æ¤œè¨¼å¾…ã¡ï¼‰
    - **å®Ÿæ–½æ—¥æ™‚**: 2026-01-10T10:30:00+09:00ï¼ˆèª¿æŸ»å®Œäº†ï¼‰ã€2026-01-10T10:45:00+09:00ï¼ˆä¿®æ­£å®Œäº†ï¼‰ã€2026-01-10T11:25:00+09:00ï¼ˆãƒ“ãƒ«ãƒ‰æˆåŠŸç¢ºèªï¼‰

#### 2-2-2-3: process-compose è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼åå•é¡Œï¼ˆè¿½åŠ ã‚¿ã‚¹ã‚¯ï¼‰

- [ ] process-compose è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã® `<ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼>` ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰å•é¡Œã‚’è§£æ±º
    - **å•é¡Œ**: `workloads/process-compose/project.yaml` ã« `<ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼>` ãŒãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚Œã¦ãŠã‚Šã€ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ä½¿ç”¨ã§ããªã„
    - **å½±éŸ¿ç®‡æ‰€**:
        - Line 11: `working_dir: "/home/<ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼>/<MonolithicDevContainerãƒ¬ãƒã‚¸ãƒˆãƒªå>"`
        - Line 15: `environment: HOME=/home/<ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼>`
        - Line 20: ã‚³ãƒ¡ãƒ³ãƒˆå†…ã® `working_dir: "/home/<ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼>/repos/some-project"`
        - Line 30: ã‚³ãƒ¡ãƒ³ãƒˆå†…ã® `working_dir: "/home/<ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼>/repos/product-a"`
        - Line 34: ã‚³ãƒ¡ãƒ³ãƒˆå†…ã® `environment: HOME=/home/<ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼>`
    - **å‚ç…§**: 25_6_20_supervisord_hardcoded_username_issue.mdï¼ˆsupervisord ã¨åŒæ§˜ã®å•é¡Œï¼‰
    - **å®Ÿæ–½å†…å®¹**:
        1. âœ… process-compose ç’°å¢ƒå¤‰æ•°å±•é–‹ã‚µãƒãƒ¼ãƒˆã®èª¿æŸ»
        2. âœ… èª¿æŸ»çµæœã«åŸºã¥ãå®Ÿè£…æ–¹é‡æ±ºå®šï¼ˆç’°å¢ƒå¤‰æ•°åŒ–å¯èƒ½ï¼‰
        3. âœ… è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ä¿®æ­£
        4. â³ å®Ÿè¡Œæ™‚æ¤œè¨¼ï¼ˆdifit ãŠã‚ˆã³ä»–ã®ãƒ—ãƒ­ã‚»ã‚¹ã®èµ·å‹•ç¢ºèªï¼‰- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå®Ÿæ–½ï¼ˆ**æ¤œè¨¼æ‰‹é †**: 25_6_21 ã‚»ã‚¯ã‚·ãƒ§ãƒ³4.1, 4.2ï¼‰
    - **èª¿æŸ»çµæœï¼ˆ2026-01-10T11:00:00+09:00ï¼‰**:
        - âœ… **process-compose ã¯ç’°å¢ƒå¤‰æ•°å±•é–‹ã‚’ã‚µãƒãƒ¼ãƒˆ**
        - âœ… `${VARNAME}` ã¾ãŸã¯ `$VARNAME` æ§‹æ–‡ã§ç’°å¢ƒå¤‰æ•°ã‚’å‚ç…§å¯èƒ½
        - âœ… envsubst ã‚’ä½¿ç”¨ã—ã¦å±•é–‹ã•ã‚Œã‚‹
        - âœ… docker-compose.yml ã§æ—¢ã« `UNAME` ç’°å¢ƒå¤‰æ•°ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ãŸã‚åˆ©ç”¨å¯èƒ½
        - å‚ç…§:
          - [Configuration - Process Compose](https://f1bonacc1.github.io/process-compose/configuration/)
    - **æ±ºå®šã—ãŸå®Ÿè£…æ–¹é‡**: âœ… **ç’°å¢ƒå¤‰æ•°åŒ–ï¼ˆ`${UNAME}`ï¼‰ã‚’æ¡ç”¨**
    - **ä¿®æ­£å†…å®¹ï¼ˆ2026-01-10T11:05:00+09:00ï¼‰**:
        - âœ… `workloads/process-compose/project.yaml`:
            - Line 11: `working_dir: "/home/<ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼>/<MonolithicDevContainerãƒ¬ãƒã‚¸ãƒˆãƒªå>"` â†’ `working_dir: "/home/<ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼>/<MonolithicDevContainerãƒ¬ãƒã‚¸ãƒˆãƒªå>"`
            - Line 15: `HOME=/home/<ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼>` â†’ `HOME=/home/<ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼>`
            - Line 20: `working_dir: "/home/<ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼>/repos/some-project"` â†’ `working_dir: "/home/${UNAME}/repos/some-project"`
            - Line 30: `working_dir: "/home/<ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼>/repos/product-a"` â†’ `working_dir: "/home/${UNAME}/repos/product-a"`
            - Line 34: `HOME=/home/<ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼>` â†’ `HOME=/home/<ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼>`
    - **è¿½åŠ ä¿®æ­£ï¼ˆ2026-01-10T11:10:00+09:00ï¼‰**:
        - âœ… ãƒªãƒã‚¸ãƒˆãƒªåã®ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ï¼ˆ`<MonolithicDevContainerãƒ¬ãƒã‚¸ãƒˆãƒªå>`ï¼‰ã‚‚ç’°å¢ƒå¤‰æ•°åŒ–
        - âœ… `REPO_NAME` ç’°å¢ƒå¤‰æ•°ã‚’ä½¿ç”¨ï¼ˆdocker-compose.yml line 43 ã§å®šç¾©æ¸ˆã¿ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `dev-hub`ï¼‰
        - âœ… Line 11: `working_dir: "/home/<ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼>/<MonolithicDevContainerãƒ¬ãƒã‚¸ãƒˆãƒªå>"` â†’ `working_dir: "/home/${UNAME}/${REPO_NAME}"`
        - âœ… ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¨ãƒªãƒã‚¸ãƒˆãƒªåã®ä¸¡æ–¹ãŒå®Œå…¨ã«ç’°å¢ƒå¤‰æ•°åŒ–ã•ã‚Œã€æ±ç”¨æ€§ãŒå‘ä¸Š
    - **å®Œäº†åŸºæº–**:
        - âœ… process-compose ç’°å¢ƒå¤‰æ•°å±•é–‹ã‚µãƒãƒ¼ãƒˆã‚’ç¢ºèª
        - âœ… `working_dir` ãŠã‚ˆã³ `environment` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ `${UNAME}` ã§å‹•çš„è¨­å®š
        - âœ… ãƒªãƒã‚¸ãƒˆãƒªåã‚‚ `${REPO_NAME}` ã§å‹•çš„è¨­å®šï¼ˆ2026-01-10T11:10:00+09:00è¿½åŠ ï¼‰
        - â³ å®Ÿè¡Œæ™‚ã«æ­£ã—ã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ›ãƒ¼ãƒ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ãƒ—ãƒ­ã‚»ã‚¹ãŒèµ·å‹•ã™ã‚‹ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼æ¤œè¨¼å¾…ã¡ï¼‰
    - **å®Ÿæ–½æ—¥æ™‚**: 2026-01-10T11:00:00+09:00ï¼ˆèª¿æŸ»å®Œäº†ï¼‰ã€2026-01-10T11:05:00+09:00ï¼ˆä¿®æ­£å®Œäº†ï¼‰ã€2026-01-10T11:10:00+09:00ï¼ˆãƒªãƒã‚¸ãƒˆãƒªåç’°å¢ƒå¤‰æ•°åŒ–å®Œäº†ï¼‰

#### 2-2-2-4: workloads/supervisord/project.conf ã®ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼åå•é¡Œï¼ˆè¿½åŠ ã‚¿ã‚¹ã‚¯ï¼‰

- [ ] workloads/supervisord/project.conf ã® `<ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼>` ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰å•é¡Œã‚’è§£æ±º
    - **å•é¡Œ**: `workloads/supervisord/project.conf` ã« `<ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼>` ãŒãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚Œã¦ãŠã‚Šã€ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ä½¿ç”¨ã§ããªã„
    - **å½±éŸ¿ç®‡æ‰€**:
        - Line 31: `user=<ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼>`
        - Line 32: `directory=/home/<ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼>/<MonolithicDevContainerãƒ¬ãƒã‚¸ãƒˆãƒªå>`
        - Line 36: `environment=CODE_SERVER_PORT="4035",HOME="/home/<ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼>"`
    - **å‚ç…§**: 25_6_20_supervisord_hardcoded_username_issue.mdï¼ˆsupervisord ã¨åŒæ§˜ã®å•é¡Œï¼‰
    - **å®Ÿæ–½å†…å®¹**:
        1. âœ… è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ä¿®æ­£ï¼ˆsupervisord ã®ç’°å¢ƒå¤‰æ•°å±•é–‹æ§‹æ–‡ã‚’ä½¿ç”¨ï¼‰
        2. â³ å®Ÿè¡Œæ™‚æ¤œè¨¼ï¼ˆcode-server èµ·å‹•ç¢ºèªï¼‰- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå®Ÿæ–½ï¼ˆ**æ¤œè¨¼æ‰‹é †**: 25_6_21 ã‚»ã‚¯ã‚·ãƒ§ãƒ³3.3, 3.4, 5.3ï¼‰
    - **æ±ºå®šã—ãŸå®Ÿè£…æ–¹é‡**: âœ… **ç’°å¢ƒå¤‰æ•°åŒ–ï¼ˆ`%(ENV_UNAME)s`, `%(ENV_REPO_NAME)s`ï¼‰ã‚’æ¡ç”¨**
    - **ä¿®æ­£å†…å®¹ï¼ˆ2026-01-10T11:15:00+09:00ï¼‰**:
        - âœ… `workloads/supervisord/project.conf`:
            - Line 31: `user=<ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼>` â†’ `user=%(ENV_UNAME)s`
            - Line 32: `directory=/home/<ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼>/<MonolithicDevContainerãƒ¬ãƒã‚¸ãƒˆãƒªå>` â†’ `directory=/home/%(ENV_UNAME)s/%(ENV_REPO_NAME)s`
            - Line 36: `HOME="/home/<ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼>"` â†’ `HOME="/home/%(ENV_UNAME)s"`
        - âœ… `REPO_NAME` ç’°å¢ƒå¤‰æ•°ã‚‚ä½¿ç”¨ï¼ˆdocker-compose.yml line 43 ã§å®šç¾©æ¸ˆã¿ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `dev-hub`ï¼‰
    - **å®Œäº†åŸºæº–**:
        - âœ… `user`, `directory`, `environment` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ç’°å¢ƒå¤‰æ•°ã§å‹•çš„è¨­å®š
        - â³ å®Ÿè¡Œæ™‚ã«æ­£ã—ã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ›ãƒ¼ãƒ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ code-server ãŒèµ·å‹•ã™ã‚‹ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼æ¤œè¨¼å¾…ã¡ï¼‰
    - **å®Ÿæ–½æ—¥æ™‚**: 2026-01-10T11:15:00+09:00ï¼ˆä¿®æ­£å®Œäº†ï¼‰

#### 2-2-3: ãƒ©ãƒƒãƒ‘ãƒ¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆå‹•ä½œç¢ºèª

- [ ] bin/dc ã®å‹•ä½œã‚’ç¢ºèª
    - **ãƒ†ã‚¹ãƒˆ1**: exec ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ï¼ˆ${UNAME} ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§è‡ªå‹•ãƒ­ã‚°ã‚¤ãƒ³ï¼‰
        ```bash
        ./bin/dc exec dev /bin/bash
        whoami  # æœŸå¾…: ${UNAME}
        ```
    - **ãƒ†ã‚¹ãƒˆ2**: exec ä»¥å¤–ã®ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ï¼ˆpsï¼‰
        ```bash
        ./bin/dc ps
        ```
    - **ãƒ†ã‚¹ãƒˆ3**: æ˜ç¤ºçš„ãª -u æŒ‡å®š
        ```bash
        ./bin/dc exec -u root dev /bin/bash
        whoami  # æœŸå¾…: root
        ```
    - **å®Œäº†åŸºæº–**: ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆãŒæœŸå¾…é€šã‚Šã«å‹•ä½œ
    - **å‚ç…§**: 25_6_16 ã‚»ã‚¯ã‚·ãƒ§ãƒ³4.3
    - **å®Ÿæ–½æ—¥æ™‚**:

#### 2-2-4: devcontainer.json ã® remoteUser è¨­å®š

- [ ] `.devcontainer/devcontainer.json` ã« remoteUser ã‚’è¿½åŠ 
    - **è¿½åŠ å†…å®¹**:
        ```json
        {
          "remoteUser": "${UNAME}"
        }
        ```
    - **å®Œäº†åŸºæº–**: devcontainer.json ã« remoteUser ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹
    - **å‚ç…§**: 25_6_16 ã‚»ã‚¯ã‚·ãƒ§ãƒ³5.2
    - **å®Ÿæ–½æ—¥æ™‚**:

#### 2-2-5: VSCode DevContainer å‹•ä½œç¢ºèª

- [ ] VSCode DevContainer ã§å‹•ä½œç¢ºèª
    - **æ‰‹é †**:
        1. VSCodeã§ã‚³ãƒ³ãƒ†ãƒŠã«å†æ¥ç¶š
        2. ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ `whoami` ã‚’å®Ÿè¡Œ â†’ `${UNAME}` ã‚’ç¢ºèª
        3. ãƒ¯ãƒ¼ã‚¯ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒé©åˆ‡ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª
    - **å®Œäº†åŸºæº–**: VSCode ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ ${UNAME} ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³ã§ãã‚‹
    - **å‚ç…§**: 25_6_16 ã‚»ã‚¯ã‚·ãƒ§ãƒ³5.2
    - **å®Ÿæ–½æ—¥æ™‚**:

#### 2-2-2-5: s6-rc ã‚µãƒ¼ãƒ“ã‚¹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚³ãƒ”ãƒ¼å•é¡Œï¼ˆé‡å¤§ãªãƒã‚°ï¼‰

- [ ] `.devcontainer/s6-rc.d/` ã‚’ Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã«ã‚³ãƒ”ãƒ¼
    - **å•é¡Œ**: s6-rc ã‚µãƒ¼ãƒ“ã‚¹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ãŒ Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã«ã‚³ãƒ”ãƒ¼ã•ã‚Œã¦ã„ãªã„
        - `.devcontainer/s6-rc.d/` ã«ã‚µãƒ¼ãƒ“ã‚¹å®šç¾©ï¼ˆsupervisord, process-compose, docker-entrypointï¼‰ã¯å­˜åœ¨
        - ã—ã‹ã—ã€Dockerfile ã« COPY å‘½ä»¤ãŒãªã„
        - çµæœã€`/etc/s6-overlay/s6-rc.d/user/contents.d/` ãŒç©ºã§ã€s6-overlay ãŒ supervisord/process-compose ã‚’èªè­˜ã§ããªã„
    - **å½±éŸ¿**:
        - âœ… s6-overlay ã¯æ­£å¸¸ã«èµ·å‹•ï¼ˆPID 1 = s6-svscanï¼‰
        - âŒ supervisord ãŒ longrun ã‚µãƒ¼ãƒ“ã‚¹ã¨ã—ã¦èµ·å‹•ã—ãªã„
        - âŒ process-compose ãŒ longrun ã‚µãƒ¼ãƒ“ã‚¹ã¨ã—ã¦èµ·å‹•ã—ãªã„
        - âŒ code-server ãƒ—ãƒ­ã‚»ã‚¹ãŒèµ·å‹•ã—ãªã„
    - **ç™ºè¦‹æ—¥æ™‚**: 2026-01-10T12:00:00+09:00
    - **ç™ºè¦‹æ–¹æ³•**: æ¤œè¨¼æ‰‹é †ï¼ˆ25_6_21ï¼‰ã‚»ã‚¯ã‚·ãƒ§ãƒ³3-3ã§ code-server ãƒ—ãƒ­ã‚»ã‚¹ã‚’ç¢ºèªã—ãŸã¨ã“ã‚ã€èµ·å‹•ã—ã¦ã„ãªã„ã“ã¨ãŒåˆ¤æ˜
    - **èª¿æŸ»çµæœ**:
        ```bash
        # ãƒ­ãƒ¼ã‚«ãƒ«ã«ã¯ã‚µãƒ¼ãƒ“ã‚¹å®šç¾©ãŒå­˜åœ¨
        $ ls .devcontainer/s6-rc.d/
        docker-entrypoint  process-compose  supervisord  user

        # ã‚³ãƒ³ãƒ†ãƒŠå†…ã§ã¯ user/contents.d ãŒç©º
        $ docker exec devcontainer-dev-1 ls -la /etc/s6-overlay/s6-rc.d/user/contents.d/
        total 8
        drwxr-xr-x 2 root root 4096 Nov 21  2023 .
        drwxr-xr-x 3 root root 4096 Nov 21  2023 ..

        # ã‚µãƒ¼ãƒ“ã‚¹ãŒèªè­˜ã•ã‚Œã¦ã„ãªã„
        $ docker exec devcontainer-dev-1 find /run/service -type d
        /run/service
        /run/service/.s6-svscan
        /run/service/s6-linux-init-shutdownd
        /run/service/s6-linux-init-shutdownd/supervise
        /run/service/s6-linux-init-shutdownd/event
        ```
    - **ä¿®æ­£å†…å®¹ï¼ˆ.devcontainer/Dockerfile line 110 ã®å¾Œï¼‰**:
        ```dockerfile
        # /etc/s6-rc ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æ—©æœŸã«ä½œæˆ
        RUN mkdir -p /etc/s6-rc

        # s6-rc ã‚µãƒ¼ãƒ“ã‚¹å®šç¾©ã‚’ã‚³ãƒ”ãƒ¼
        # v10è¨­è¨ˆ: supervisord, process-compose, docker-entrypoint ã‚’ s6-overlay ã§ç®¡ç†
        COPY .devcontainer/s6-rc.d/ /etc/s6-overlay/s6-rc.d/

        # â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
        # Process management: supervisord
        ```
    - **å®Œäº†åŸºæº–**:
        - [x] Dockerfile ã« COPY å‘½ä»¤ãŒè¿½åŠ ã•ã‚Œã¦ã„ã‚‹ï¼ˆ2026-01-10T12:05:00+09:00å®Œäº†ï¼‰
        - [ ] ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãªã—ã§å†ãƒ“ãƒ«ãƒ‰ãŒæˆåŠŸã™ã‚‹ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼å®Ÿæ–½å¾…ã¡ï¼‰
        - [ ] `/etc/s6-overlay/s6-rc.d/user/contents.d/` ã«ã‚µãƒ¼ãƒ“ã‚¹å®šç¾©ï¼ˆdocker-entrypoint, supervisord, process-composeï¼‰ãŒå­˜åœ¨ã™ã‚‹ï¼ˆãƒ“ãƒ«ãƒ‰å¾Œç¢ºèªï¼‰
        - [ ] supervisord ãŒ longrun ã‚µãƒ¼ãƒ“ã‚¹ã¨ã—ã¦èµ·å‹•ã—ã¦ã„ã‚‹ï¼ˆãƒ“ãƒ«ãƒ‰å¾Œç¢ºèªï¼‰
        - [ ] code-server ãƒ—ãƒ­ã‚»ã‚¹ãŒèµ·å‹•ã—ã¦ã„ã‚‹ï¼ˆãƒ“ãƒ«ãƒ‰å¾Œç¢ºèªï¼‰
    - **å‚ç…§**:
        - 25_6_21_verification_procedure.md ã‚»ã‚¯ã‚·ãƒ§ãƒ³3-3ï¼ˆå•é¡Œç™ºè¦‹ï¼‰
        - 25_6_21_verification_procedure.md ã‚»ã‚¯ã‚·ãƒ§ãƒ³3-3-1ï¼ˆä¿®æ­£æ‰‹é †ï¼‰
        - v10è¨­è¨ˆï¼ˆ25_0_process_management_solution.v10.mdï¼‰
    - **å®Ÿæ–½æ—¥æ™‚**:
        - å•é¡Œç™ºè¦‹: 2026-01-10T12:00:00+09:00
        - Dockerfileä¿®æ­£å®Œäº†: 2026-01-10T12:05:00+09:00
        - å†ãƒ“ãƒ«ãƒ‰ãƒ»æ¤œè¨¼: ãƒ¦ãƒ¼ã‚¶ãƒ¼å®Ÿæ–½å¾…ã¡

#### 2-2-2-6: docker-entrypoint ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆå•é¡Œã®ä¿®æ­£ï¼ˆé‡å¤§ãªãƒã‚°ï¼‰

- [ ] docker-entrypoint ã‚’ root æ¨©é™æ“ä½œã®ã¿ã«é™å®šã—ã€ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ“ä½œã‚’ .bashrc_custom ã«ç§»å‹•
    - **åŸºæœ¬æ–¹é‡**:
        > **docker-entrypoint ã« root ã¨ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼åŒæ–¹ã®è¦æ±‚ã‚’æº€ãŸã™å‡¦ç†ã‚’ã•ã›ãªã„**

        - ç¾åœ¨ã® docker-entrypoint.sh ã¯ root æ¨©é™æ“ä½œï¼ˆPhase 1-2, 4-5ï¼‰ã¨ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ“ä½œï¼ˆPhase 3ï¼‰ã‚’åŒæ™‚ã«å®Ÿè¡Œã—ã‚ˆã†ã¨ã—ã¦ã„ã‚‹
        - s6-overlay ã® `s6-setuidgid "${UNAME}"` ã¯ç’°å¢ƒå¤‰æ•°å±•é–‹ã‚’ã‚µãƒãƒ¼ãƒˆã›ãšã€æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ« `"${UNAME}"` ã¨ã—ã¦è§£é‡ˆã•ã‚Œã‚‹
        - çµæœã€docker-entrypoint ã‚µãƒ¼ãƒ“ã‚¹ãŒ `s6-envuidgid: fatal: unknown user: ${UNAME}` ã§å¤±æ•—
    - **å•é¡Œ**: `.devcontainer/s6-rc.d/docker-entrypoint/up` ãŒç’°å¢ƒå¤‰æ•°å±•é–‹ã«å¤±æ•—
        - ç¾åœ¨ã®å®Ÿè£…: `exec s6-setuidgid "${UNAME}" /usr/local/bin/docker-entrypoint.sh`
        - s6-overlay ã¯ `"${UNAME}"` ã‚’æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã¨ã—ã¦æ‰±ã„ã€ç’°å¢ƒå¤‰æ•°å±•é–‹ã‚’è¡Œã‚ãªã„
        - `s6-envuidgid` ãŒ `"${UNAME}"` ã¨ã„ã†åå‰ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æ¢ã—ã¦å¤±æ•—
    - **æ ¹æœ¬åŸå› **: docker-entrypoint.sh ã®è²¬ä»»éå¤š
        - **Phase 1-2, 4-5**: root æ¨©é™ãŒå¿…è¦ï¼ˆchown, chmod, ln -sfï¼‰
        - **Phase 3**: ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãŒå¿…è¦ï¼ˆAtuin åˆæœŸåŒ–ã€`~` ã®è§£æ±ºï¼‰
        - ã©ã¡ã‚‰ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§å®Ÿè¡Œã—ã¦ã‚‚ç›¸åã™ã‚‹è¦æ±‚ã«ã‚ˆã‚Šå¤±æ•—ã™ã‚‹
    - **æ¡ç”¨ã™ã‚‹è§£æ±ºç­–**: æ¡ˆ1ï¼ˆé…å»¶åˆæœŸåŒ–ã‚¢ãƒ—ãƒ­ãƒ¼ãƒï¼‰
        - docker-entrypoint ã¯ root æ¨©é™æ“ä½œã®ã¿ã«é›†ä¸­
        - Phase 3ï¼ˆAtuin åˆæœŸåŒ–ï¼‰ã‚’ .bashrc_custom ã«ç§»å‹•ã—ã€åˆå›ãƒ­ã‚°ã‚¤ãƒ³æ™‚ã«å®Ÿè¡Œ
        - s6-overlay ã®ç’°å¢ƒå¤‰æ•°å•é¡Œã‚’å®Œå…¨ã«å›é¿
    - **ä¿®æ­£å†…å®¹**:
        1. âœ… å•é¡Œåˆ†æãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆï¼ˆ25_6_22_docker_entrypoint_user_context_issue.mdï¼‰
        2. [ ] `.devcontainer/s6-rc.d/docker-entrypoint/up` ã‚’ root ã§å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«ä¿®æ­£
        3. [ ] `.devcontainer/docker-entrypoint.sh` ã‹ã‚‰ Phase 3ï¼ˆAtuin åˆæœŸåŒ–ï¼‰ã‚’å‰Šé™¤
        4. [ ] `.devcontainer/shell/.bashrc_custom` ã« Atuin åˆæœŸåŒ–ãƒ­ã‚¸ãƒƒã‚¯ã‚’è¿½åŠ ï¼ˆå†ªç­‰æ€§ã‚ã‚Šï¼‰
        5. [ ] ã‚³ãƒ³ãƒ†ãƒŠå†ãƒ“ãƒ«ãƒ‰ã¨æ¤œè¨¼
    - **å½±éŸ¿ç¯„å›²**:
        - âœ… s6-overlay ã¯æ­£å¸¸ã«èµ·å‹•ï¼ˆPID 1 = s6-svscanï¼‰
        - âŒ docker-entrypoint ã‚µãƒ¼ãƒ“ã‚¹ãŒ exit status 1 ã§å¤±æ•—
        - âŒ Phase 3ï¼ˆAtuin åˆæœŸåŒ–ï¼‰ãŒå®Ÿè¡Œã•ã‚Œãªã„
        - âŒ Phase 1-2, 4-5 ã‚‚å®Ÿè¡Œã•ã‚Œãªã„ï¼ˆPhase 3 ã§å¤±æ•—ã™ã‚‹ãŸã‚ï¼‰
    - **é‡è¦ãªåˆ¶ç´„**:
        - **docker-entrypoint é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«åã€ã‚³ãƒ¡ãƒ³ãƒˆã€å‘¼ã³å‡ºã—å…ƒï¼‰ã«ã¯ root ã§å®Ÿè¡Œã™ã‚‹ã¹ãã“ã¨ã®ã¿ã‚’è¨˜è¿°**
        - ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§å®Ÿè¡Œã—ãŸã„ã“ã¨ã‚’ docker-entrypoint ã«è¨˜è¿°ã™ã‚‹ã¨ã€ã“ã®å•é¡ŒãŒå†ç™ºã™ã‚‹
        - ãƒ•ã‚¡ã‚¤ãƒ«å: `docker-entrypoint/up` ã¯ root å®Ÿè¡Œã‚’å‰æã¨ã—ãŸå‘½å
        - ã‚³ãƒ¡ãƒ³ãƒˆ: "root ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§å®Ÿè¡Œ" ã‚’æ˜è¨˜ã—ã€ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ“ä½œã¯ .bashrc_custom ã§å®Ÿè¡Œã™ã‚‹ã“ã¨ã‚’æ˜è¨˜
        - å‘¼ã³å‡ºã—å…ƒ: s6-rc ã‚µãƒ¼ãƒ“ã‚¹å®šç¾©ã§ root ã¨ã—ã¦å®Ÿè¡Œï¼ˆ`s6-setuidgid` ã‚’ä½¿ç”¨ã—ãªã„ï¼‰
    - **å®Œäº†åŸºæº–**:
        - [ ] 25_6_22 ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆå®Œäº†ï¼ˆåŸºæœ¬æ–¹é‡æ˜è¨˜ï¼‰
        - [ ] s6-rc.d/docker-entrypoint/up ãŒ root ã§å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ï¼ˆ`s6-setuidgid` ã‚’å‰Šé™¤ï¼‰
        - [ ] docker-entrypoint.sh ã‹ã‚‰ Phase 3 ãŒå‰Šé™¤ã•ã‚Œã¦ã„ã‚‹
        - [ ] .bashrc_custom ã« Atuin åˆæœŸåŒ–ãŒè¿½åŠ ã•ã‚Œã¦ã„ã‚‹ï¼ˆå†ªç­‰æ€§ã‚ã‚Šã€root ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ¤å®šã‚ã‚Šï¼‰
        - [ ] docker-entrypoint ã‚µãƒ¼ãƒ“ã‚¹ãŒæ­£å¸¸ã«å®Œäº†ã™ã‚‹ï¼ˆexit status 0ï¼‰
        - [ ] Atuin ãŒåˆå›ãƒ­ã‚°ã‚¤ãƒ³æ™‚ã«æ­£ã—ãåˆæœŸåŒ–ã•ã‚Œã‚‹
    - **å‚ç…§**:
        - 25_6_22_docker_entrypoint_user_context_issue.md - å•é¡Œåˆ†æã¨è§£æ±ºç­–
        - 25_6_21_verification_procedure.md ã‚»ã‚¯ã‚·ãƒ§ãƒ³1-3 - docker-entrypoint å¤±æ•—ç¢ºèª
        - v10è¨­è¨ˆï¼ˆ25_0_process_management_solution.v10.mdï¼‰
    - **å®Ÿæ–½æ—¥æ™‚**:
        - å•é¡Œç™ºè¦‹: 2026-01-10T12:20:00+09:00ï¼ˆæ¤œè¨¼æ‰‹é †å®Ÿæ–½ä¸­ï¼‰
        - å•é¡Œåˆ†æãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ: 2026-01-10T12:30:00+09:00ã€œ13:00:00+09:00
        - å®Ÿè£…: æœªç€æ‰‹

---

### Phase 2 æ®‹ã‚Šã®æ¤œè¨¼é …ç›®ï¼ˆv10è¨­è¨ˆæ¤œè¨¼ï¼‰

#### 2-4: ã‚µãƒ¼ãƒ“ã‚¹çŠ¶æ…‹ç¢ºèª

- [ ] s6-overlayã®ã‚µãƒ¼ãƒ“ã‚¹ãŒã™ã¹ã¦èµ·å‹•ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
    - **ã‚³ãƒãƒ³ãƒ‰**:
        ```bash
        docker exec <MonolithicDevContainerãƒ¬ãƒã‚¸ãƒˆãƒªå>_devcontainer-dev-1 /command/s6-rc -a list
        docker exec <MonolithicDevContainerãƒ¬ãƒã‚¸ãƒˆãƒªå>_devcontainer-dev-1 /command/s6-svstat /run/service/supervisord
        docker exec <MonolithicDevContainerãƒ¬ãƒã‚¸ãƒˆãƒªå>_devcontainer-dev-1 /command/s6-svstat /run/service/process-compose
        ```
    - **å®Œäº†åŸºæº–**: `docker-entrypoint`, `supervisord`, `process-compose`ãŒè¡¨ç¤ºã•ã‚Œã€ã™ã¹ã¦`up`çŠ¶æ…‹
    - **å‚ç…§**: 25_6_12_v10_completion_strategy.md Phase 2 ã‚¿ã‚¹ã‚¯2-4
    - **å®Ÿæ–½æ—¥æ™‚**:

#### 2-5: docker-entrypoint.shå®Ÿè¡Œç¢ºèª

- [ ] docker-entrypoint.sh Phase 1-5ãŒå®Ÿè¡Œã•ã‚ŒãŸã“ã¨ã‚’ç¢ºèª
    - **ã‚³ãƒãƒ³ãƒ‰**:
        ```bash
        docker logs <MonolithicDevContainerãƒ¬ãƒã‚¸ãƒˆãƒªå>_devcontainer-dev-1 2>&1 | grep "Phase"
        ```
    - **å®Œäº†åŸºæº–**: Phase 1-5ã®å®Ÿè¡Œãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã‚‹
    - **å‚ç…§**: 25_6_12_v10_completion_strategy.md Phase 2 ã‚¿ã‚¹ã‚¯2-5
    - **å®Ÿæ–½æ—¥æ™‚**:

#### 2-6: code-serverå‹•ä½œç¢ºèª

- [ ] code-serverãŒæ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
    - **ã‚³ãƒãƒ³ãƒ‰**:
        ```bash
        curl -I http://localhost:4035
        ```
    - **å®Œäº†åŸºæº–**: HTTP 200ã¾ãŸã¯ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆãŒè¿”ã‚‹
    - **å‚ç…§**: 25_6_12_v10_completion_strategy.md Phase 2 ã‚¿ã‚¹ã‚¯2-6
    - **å®Ÿæ–½æ—¥æ™‚**:

#### 2-7: graceful shutdownç¢ºèª

- [ ] graceful shutdownãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèª
    - **ã‚³ãƒãƒ³ãƒ‰**:
        ```bash
        docker stop <MonolithicDevContainerãƒ¬ãƒã‚¸ãƒˆãƒªå>_devcontainer-dev-1
        docker logs <MonolithicDevContainerãƒ¬ãƒã‚¸ãƒˆãƒªå>_devcontainer-dev-1 2>&1 | tail -n 20
        ```
    - **å®Œäº†åŸºæº–**: s6-overlayã«ã‚ˆã‚‹æ­£å¸¸ãªã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã‚‹
    - **å‚ç…§**: 25_6_12_v10_completion_strategy.md Phase 2 ã‚¿ã‚¹ã‚¯2-7
    - **å®Ÿæ–½æ—¥æ™‚**:

#### 2-8: ãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ç¢ºèªï¼ˆ25_6_16å¯¾å¿œï¼‰

- [ ] bin/dc ãƒ©ãƒƒãƒ‘ãƒ¼çµŒç”±ã§ã®ãƒ­ã‚°ã‚¤ãƒ³æ™‚ã«`${UNAME}`ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª
    - **ã‚³ãƒãƒ³ãƒ‰**:
        ```bash
        ./bin/dc exec dev /bin/bash -c "whoami"
        ```
    - **å®Œäº†åŸºæº–**: `${UNAME}`ãŒè¡¨ç¤ºã•ã‚Œã‚‹
    - **å‚ç…§**: 25_6_16 ã‚»ã‚¯ã‚·ãƒ§ãƒ³4.3
    - **æ³¨è¨˜**: Phase 2-2-3 ã§æ—¢ã«æ¤œè¨¼æ¸ˆã¿ã®å ´åˆã¯ã‚¹ã‚­ãƒƒãƒ—å¯
    - **å®Ÿæ–½æ—¥æ™‚**:

---

### Phase 3: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°

**ç›®çš„**: v10å®Ÿè£…å®Œäº†ã¨USERå•é¡Œè§£æ±ºã‚’å„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«è¨˜éŒ²ã™ã‚‹

#### 3-0: å•é¡Œåˆ†æãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆï¼ˆå®Œäº†æ¸ˆã¿ï¼‰

- [x] 25_6_14: USER ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–é™ç•Œåˆ†æ
    - **ä½œæˆå†…å®¹**: Docker USER ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã®æŒ™å‹•åˆ†æã€4ã¤ã®è§£æ±ºç­–ã®è©•ä¾¡
    - **å®Œäº†åŸºæº–**: âœ… ä½œæˆæ¸ˆã¿
    - **å®Ÿæ–½æ—¥æ™‚**: 2026-01-10T02:00:00+09:00
    - **çµæœ**: âœ… **å®Œäº†** - é¸æŠè‚¢1ã€œ4ã‚’åˆ†æã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ«ãƒ¼ãƒ«ã«åŸºã¥ãé¸æŠè‚¢2ã‚’æ¨å¥¨

- [x] 25_6_15: devcontainer.json remoteUser èª¿æŸ»
    - **ä½œæˆå†…å®¹**: remoteUserã®ä»•çµ„ã¿ã€containerUserã¨ã®é•ã„ã€å‰¯ä½œç”¨ãƒ»ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ
    - **å®Œäº†åŸºæº–**: âœ… ä½œæˆæ¸ˆã¿
    - **å®Ÿæ–½æ—¥æ™‚**: 2026-01-10T03:00:00+09:00
    - **çµæœ**: âœ… **å®Œäº†** - remoteUserã¯ `docker exec -u` ã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹ã ã‘ã¨åˆ¤æ˜

- [x] 25_6_16: ãƒ©ãƒƒãƒ‘ãƒ¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆæˆ¦ç•¥
    - **ä½œæˆå†…å®¹**: docker compose exec ãƒ©ãƒƒãƒ‘ãƒ¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«ã‚ˆã‚‹è§£æ±ºç­–ã€å®Ÿè£…è¨ˆç”»
    - **å®Œäº†åŸºæº–**: âœ… ä½œæˆæ¸ˆã¿
    - **å®Ÿæ–½æ—¥æ™‚**: 2026-01-10T04:00:00+09:00
    - **çµæœ**: âœ… **å®Œäº†** - é¸æŠè‚¢Dï¼ˆé«˜æ©Ÿèƒ½ãƒ©ãƒƒãƒ‘ãƒ¼ï¼‰ã¨ã—ã¦ bin/dc å®Ÿè£…ã‚’ææ¡ˆ
    - **æ›´æ–°**: æ­£ã—ã„ docker compose ã‚³ãƒãƒ³ãƒ‰æ§‹é€ ã«ä¿®æ­£ï¼ˆ.devcontainerãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰å®Ÿè¡Œã€-f ãƒ•ãƒ©ã‚°2ã¤æŒ‡å®šï¼‰

#### 3-1: v10å®Ÿè£…ãƒˆãƒ©ãƒƒã‚«ãƒ¼æ›´æ–°

- [ ] `25_4_2_v10_implementation_tracker.md` Phase 1ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æ›´æ–°
    - **æ›´æ–°å†…å®¹**:
        ```markdown
        ### Phase 1: s6-overlayå°å…¥ï¼ˆPID 1å¤‰æ›´ï¼‰
        - [x] Dockerfileã«s6-overlayã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã€ENTRYPOINTã‚’`/init`ã«å¤‰æ›´
        - [x] `.devcontainer/s6-rc.d/` ã«ã‚µãƒ¼ãƒ“ã‚¹å®šç¾©ã‚’ä½œæˆ

        **æ›´æ–°æ—¥**: 2026-01-09
        **æ›´æ–°å†…å®¹**: ENTRYPOINTã‚’`/init`ã«å¤‰æ›´å®Œäº†ï¼ˆ25_6_12å®Ÿè£…å®Œäº†ï¼‰
        ```
    - **å®Œäº†åŸºæº–**: Phase 1ãŒå®Œäº†ã¨ã—ã¦ãƒãƒ¼ã‚¯ã•ã‚Œã¦ã„ã‚‹
    - **å‚ç…§**: 25_6_12_v10_completion_strategy.md Phase 3 ã‚¿ã‚¹ã‚¯3-1
    - **å®Ÿæ–½æ—¥æ™‚**:

#### 3-2: 25_6_11æ¤œè¨¼ãƒˆãƒ©ãƒƒã‚«ãƒ¼æ›´æ–°

- [ ] `25_6_11_pid1_design_deviation_verification_tracker.md` ã‚»ã‚¯ã‚·ãƒ§ãƒ³Cã‚’å®Œäº†ã¨ã—ã¦ãƒãƒ¼ã‚¯
    - **æ›´æ–°å†…å®¹**:
        - C-1: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠè‚¢Aã‚’é¸æŠã—ãŸã“ã¨ã‚’è¨˜éŒ²
        - C-2: æ±ºå®šã—ãŸæ–¹é‡ï¼ˆv10è¨­è¨ˆå®Œæˆï¼‰ã‚’è¨˜éŒ²
        - C-3: mode-3ï¼ˆå®Ÿè£…ãƒ»æ¤œè¨¼ãƒ¢ãƒ¼ãƒ‰ï¼‰ã«ç§»è¡Œã—ãŸã“ã¨ã‚’è¨˜éŒ²
    - **å®Œäº†åŸºæº–**: ã‚»ã‚¯ã‚·ãƒ§ãƒ³CãŒã™ã¹ã¦å®Œäº†
    - **å‚ç…§**: 25_6_12_v10_completion_strategy.md Phase 3 ã‚¿ã‚¹ã‚¯3-2
    - **å®Ÿæ–½æ—¥æ™‚**:

#### 3-3: 25_6_12æˆ¦ç•¥ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°

- [ ] `25_6_12_v10_completion_strategy.md` ã«ã€Œ## 8. å®Ÿè£…å®Œäº†ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ 
    - **è¿½åŠ å†…å®¹**:
        - å®Ÿæ–½æ—¥æ™‚
        - æ¤œè¨¼çµæœã®ã‚µãƒãƒªãƒ¼
        - æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆãƒ©ãƒƒãƒ‘ãƒ¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè£…ç­‰ï¼‰
    - **å®Œäº†åŸºæº–**: ã‚»ã‚¯ã‚·ãƒ§ãƒ³8ãŒè¿½åŠ ã•ã‚Œã¦ã„ã‚‹
    - **å‚ç…§**: 25_6_12_v10_completion_strategy.md Phase 3 ã‚¿ã‚¹ã‚¯3-3
    - **å®Ÿæ–½æ—¥æ™‚**:

#### 3-4: v12æ§‹é€ é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆãƒ»æ›´æ–°

- [x] ADR 005 ä½œæˆï¼ˆé–‹ç™ºãƒ„ãƒ¼ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®é…ç½®å ´æ‰€ã¨v12æ§‹é€ ç­–å®šï¼‰
    - **ãƒ•ã‚¡ã‚¤ãƒ«**: `foundations/adr/005_development_tools_scripts_placement.md`
    - **å®Œäº†åŸºæº–**: âœ… ä½œæˆæ¸ˆã¿
    - **å‚ç…§**: 25_6_19 Phase 1 ã‚¿ã‚¹ã‚¯1-1
    - **å®Ÿæ–½æ—¥æ™‚**: 2026-01-10T07:30:00+09:00
    - **çµæœ**: âœ… **å®Œäº†** - bin/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ–°è¨­ã®æ±ºå®šç†ç”±ã‚’è¨˜éŒ²

- [x] v12æ§‹é€ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ
    - **ãƒ•ã‚¡ã‚¤ãƒ«**: `initiatives/20251229--dev-hub-concept/14_è©³ç´°è¨­è¨ˆ_ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ.v12.md`
    - **å®Œäº†åŸºæº–**: âœ… ä½œæˆæ¸ˆã¿
    - **å‚ç…§**: 25_6_19 Phase 2 ã‚¿ã‚¹ã‚¯2-1
    - **å®Ÿæ–½æ—¥æ™‚**: 2026-01-10T07:45:00+09:00
    - **çµæœ**: âœ… **å®Œäº†** - v11ã‹ã‚‰v12ã¸ã®å¤‰æ›´ç‚¹ï¼ˆbin/è¿½åŠ ï¼‰ã‚’æ˜è¨˜

- [x] 25_6_18 ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°ï¼ˆv11â†’v12ã«ä¿®æ­£ï¼‰
    - **ãƒ•ã‚¡ã‚¤ãƒ«**: `initiatives/20251229--dev-hub-concept/25_6_18_devcontainer_scripts_analysis.md`
    - **æ›´æ–°å†…å®¹**: ã€Œv11æ§‹é€ ã€ã‚’ã€Œv12æ§‹é€ ã€ã«å…¨é¢çš„ã«ä¿®æ­£
    - **å®Œäº†åŸºæº–**: âœ… æ›´æ–°æ¸ˆã¿
    - **å‚ç…§**: 25_6_19 Phase 3 ã‚¿ã‚¹ã‚¯3-1
    - **å®Ÿæ–½æ—¥æ™‚**: 2026-01-10T08:00:00+09:00
    - **çµæœ**: âœ… **å®Œäº†** - v12æ§‹é€ ç­–å®šã«åˆã‚ã›ã¦æ–‡è¨€ã‚’ä¿®æ­£

- [x] 25_6_12 å®Ÿè£…ãƒˆãƒ©ãƒƒã‚«ãƒ¼æ›´æ–°ï¼ˆã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼‰
    - **æ›´æ–°å†…å®¹**: Phase 3-4ã«v12é–¢é€£ã‚¿ã‚¹ã‚¯ã‚’è¿½åŠ 
    - **å®Œäº†åŸºæº–**: âœ… æ›´æ–°æ¸ˆã¿
    - **å‚ç…§**: 25_6_19 Phase 3 ã‚¿ã‚¹ã‚¯3-3
    - **å®Ÿæ–½æ—¥æ™‚**: 2026-01-10T08:15:00+09:00
    - **çµæœ**: âœ… **å®Œäº†** - v12æ§‹é€ ç­–å®šã‚¿ã‚¹ã‚¯ã‚’è¨˜éŒ²

#### 3-5: README.md ã«ä½¿ã„æ–¹ã‚’è¿½åŠ 

- [ ] README.md ã«ãƒ©ãƒƒãƒ‘ãƒ¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä½¿ã„æ–¹ã‚’è¿½åŠ 
    - **è¿½åŠ å†…å®¹**:
        ```markdown
        ## ã‚³ãƒ³ãƒ†ãƒŠã¸ã®ãƒ­ã‚°ã‚¤ãƒ³

        ### æ¨å¥¨æ–¹æ³•: ãƒ©ãƒƒãƒ‘ãƒ¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

        ```bash
        # ${UNAME} ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ãƒ­ã‚°ã‚¤ãƒ³ï¼ˆãƒªãƒã‚¸ãƒˆãƒªãƒ«ãƒ¼ãƒˆã‹ã‚‰å®Ÿè¡Œï¼‰
        ./bin/dc exec dev /bin/bash
        ```

        ### ç›´æ¥ docker compose ã‚’ä½¿ã†å ´åˆ

        ```bash
        # .devcontainer ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
        cd .devcontainer

        # æ‰‹å‹•ã§ -u ãƒ•ãƒ©ã‚°ã¨ä¸¡æ–¹ã®composeãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®š
        docker compose -f docker-compose.yml -f docker-compose.dev-vm.yml exec -u ${UNAME} dev /bin/bash
        ```
        ```
    - **å®Œäº†åŸºæº–**: README.md ã«ä½¿ã„æ–¹ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒè¿½åŠ ã•ã‚Œã¦ã„ã‚‹
    - **å‚ç…§**: 25_6_16 ã‚»ã‚¯ã‚·ãƒ§ãƒ³6 Phase 3
    - **å®Ÿæ–½æ—¥æ™‚**:

---

### Phase 4: ã‚³ãƒŸãƒƒãƒˆ

**ç›®çš„**: å¤‰æ›´ã‚’gitã«ã‚³ãƒŸãƒƒãƒˆã™ã‚‹

#### 4-1: git add

- [ ] å¤‰æ›´ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°
    - **ã‚³ãƒãƒ³ãƒ‰**:
        ```bash
        git add .devcontainer/Dockerfile
        git add .devcontainer/docker-entrypoint.sh
        git add .devcontainer/s6-rc.d/docker-entrypoint/up
        git add .devcontainer/devcontainer.json
        git add bin/dc
        git add initiatives/20251229--dev-hub-concept/25_6_12_v10_completion_strategy.md
        git add initiatives/20251229--dev-hub-concept/25_6_12_v10_completion_implementation_tracker.md
        git add initiatives/20251229--dev-hub-concept/25_6_13_user_context_requirements.md
        git add initiatives/20251229--dev-hub-concept/25_6_14_user_directive_limitation_analysis.md
        git add initiatives/20251229--dev-hub-concept/25_6_15_devcontainer_remoteuser_investigation.md
        git add initiatives/20251229--dev-hub-concept/25_6_16_wrapper_script_strategy.md
        git add initiatives/20251229--dev-hub-concept/25_4_2_v10_implementation_tracker.md
        git add initiatives/20251229--dev-hub-concept/25_6_11_pid1_design_deviation_verification_tracker.md
        git add README.md
        ```
    - **å®Œäº†åŸºæº–**: `git status`ã§å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¡¨ç¤ºã•ã‚Œã‚‹
    - **å‚ç…§**: 25_6_12_v10_completion_strategy.md Phase 4 ã‚¿ã‚¹ã‚¯4-1
    - **å®Ÿæ–½æ—¥æ™‚**:

#### 4-2: ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä½œæˆï¼ˆ3å€™è£œï¼‰

- [ ] commit-messages-guidelines.mdcã«å¾“ã„ã€3ã¤ã®å€™è£œã‚’ä½œæˆ
    - **å®Œäº†åŸºæº–**: 3ã¤ã®å€™è£œã¨ãƒ¡ãƒªãƒƒãƒˆãƒ»ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã‚’è¨˜è¼‰
    - **å‚ç…§**: .cursor/rules/commit-messages-guidelines.mdc
    - **å®Ÿæ–½æ—¥æ™‚**:

#### 4-3: git commitå®Ÿæ–½

- [ ] é¸æŠã—ãŸã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ã‚³ãƒŸãƒƒãƒˆ
    - **ã‚³ãƒãƒ³ãƒ‰**: `git commit -m "..."`
    - **å®Œäº†åŸºæº–**: ã‚³ãƒŸãƒƒãƒˆæˆåŠŸ
    - **å‚ç…§**: 25_6_12_v10_completion_strategy.md Phase 4 ã‚¿ã‚¹ã‚¯4-2
    - **å®Ÿæ–½æ—¥æ™‚**:

---

## ä¸»è¦ãªé”æˆæˆæœ

ï¼ˆPhase 2å®Œäº†å¾Œã«è¨˜éŒ²ï¼‰

1. **v10è¨­è¨ˆå®Œæˆ**
    - âœ… s6-overlayãŒPID 1ã¨ã—ã¦å‹•ä½œ
    - âœ… docker-entrypoint.shãŒoneshotã‚µãƒ¼ãƒ“ã‚¹ã¨ã—ã¦å‹•ä½œ
    - âœ… supervisordã¨process-composeãŒlongrunã‚µãƒ¼ãƒ“ã‚¹ã¨ã—ã¦å‹•ä½œ

2. **æ¤œè¨¼å®Œäº†**
    - âœ… ã™ã¹ã¦ã®æ¤œè¨¼é …ç›®ï¼ˆ2-1ã€œ2-7ï¼‰ãŒæˆåŠŸ

3. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°å®Œäº†**
    - âœ… v10å®Ÿè£…ãƒˆãƒ©ãƒƒã‚«ãƒ¼æ›´æ–°
    - âœ… æ¤œè¨¼ãƒˆãƒ©ãƒƒã‚«ãƒ¼æ›´æ–°
    - âœ… æˆ¦ç•¥ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°

---

## Phase 2 ã§ç™ºè¦‹ã•ã‚ŒãŸå•é¡Œ

### å•é¡Œã®æ¦‚è¦

**Phase 1-4 ã®å®Ÿè£…ç›®æ¨™**:
- Dockerfile ã® `USER ${UNAME}` ã‚’ ENTRYPOINT ã®å¾Œã«é…ç½®ã™ã‚‹ã“ã¨ã§:
  - PID 1 = rootï¼ˆv10è¨­è¨ˆï¼‰
  - docker exec = ${UNAME}ï¼ˆé–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ï¼‰

**å®Ÿéš›ã®çµæœ**:
- âœ… PID 1 = rootï¼ˆç›®æ¨™é”æˆï¼‰
- âŒ docker exec = rootï¼ˆç›®æ¨™æœªé”æˆã€/root/.atuinã‚¨ãƒ©ãƒ¼ï¼‰

**åŸå› **:
- 25_6_13 ã§ç«‹æ¡ˆã—ãŸç†è«–ãŒèª¤ã‚Š
- Docker ã® `USER` æŒ‡å®šã¯ã€é…ç½®ä½ç½®ã«é–¢ã‚ã‚‰ãšã™ã¹ã¦ã®ãƒ—ãƒ­ã‚»ã‚¹ã«å½±éŸ¿

**è©³ç´°**: `25_6_14_user_directive_limitation_analysis.md`

### æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

**ç¾åœ¨ã®çŠ¶æ³**:
1. âœ… v10è¨­è¨ˆã®å®Ÿè£…å®Œäº†ï¼ˆPhase 1ï¼‰
2. âœ… PID 1 = root ã®ç¢ºèªå®Œäº†ï¼ˆPhase 2-3ï¼‰
3. âœ… USERå•é¡Œã®åˆ†æã¨è§£æ±ºç­–ç¢ºå®šï¼ˆ25_6_14, 25_6_15, 25_6_16ï¼‰
4. ğŸ”´ ãƒ©ãƒƒãƒ‘ãƒ¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè£…ãŒå¿…è¦ï¼ˆPhase 2-2ï¼‰

**æ¡ç”¨ã—ãŸè§£æ±ºç­–**: ãƒ©ãƒƒãƒ‘ãƒ¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆæˆ¦ç•¥ï¼ˆ25_6_16ï¼‰
- âœ… PID 1 = rootï¼ˆv10è¨­è¨ˆç¶­æŒï¼‰
- ğŸ”´ docker compose exec = ${UNAME}ï¼ˆbin/dc å®Ÿè£…ã«ã‚ˆã‚Šå®Ÿç¾ï¼‰
- ğŸ”´ VSCode DevContainer = ${UNAME}ï¼ˆdevcontainer.json remoteUserè¨­å®šã«ã‚ˆã‚Šå®Ÿç¾ï¼‰

**ç¾åœ¨ã®ãƒ¢ãƒ¼ãƒ‰**: mode-3ï¼ˆå®Ÿè£…ãƒ»æ¤œè¨¼ãƒ¢ãƒ¼ãƒ‰ï¼‰

**immediate action**:
1. bin/dc ãƒ©ãƒƒãƒ‘ãƒ¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆä½œæˆï¼ˆPhase 2-2-1ï¼‰
2. å®Ÿè¡Œæ¨©é™ä»˜ä¸ï¼ˆPhase 2-2-2ï¼‰
3. å‹•ä½œç¢ºèªï¼ˆPhase 2-2-3ï¼‰
4. devcontainer.json æ›´æ–°ï¼ˆPhase 2-2-4ï¼‰

---

**æœ€çµ‚æ›´æ–°**: 2026-01-10T05:00:00+09:00
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: ğŸ”µ **Phase 2-2å®Ÿè£…å¾…ã¡** - ãƒ©ãƒƒãƒ‘ãƒ¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆæˆ¦ç•¥ç¢ºå®šã€å®Ÿè£…æº–å‚™å®Œäº†
**æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**: bin/dc ã‚¹ã‚¯ãƒªãƒ—ãƒˆä½œæˆã¨devcontainer.jsonä¿®æ­£ï¼ˆmode-3ï¼‰
